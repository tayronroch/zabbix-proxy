version: '3.5'

# ðŸš€ CoreWise Zabbix Proxy + Sender
# Sistema de proxy para monitoramento distribuÃ­do com coleta SSH
# Servidor: 45.161.89.183

services:
  zabbix-proxy:
    build:
      context: .
      dockerfile: Dockerfile.proxy
    image: corewise-zabbix-proxy:latest
    container_name: corewise-zabbix-proxy
    environment:
      ZBX_HOSTNAME: corewise-proxy
      ZBX_SERVER_HOST: 45.161.89.183
      ZBX_SERVER_PORT: 10051
    ports:
      - "10051:10051"
    restart: always
    labels:
      - "coolify.managed=true"

  zabbix-sender:
    build:
      context: .
      dockerfile: Dockerfile.sender
    image: corewise-zabbix-sender:latest
    container_name: corewise-zabbix-sender
    environment:
      ZBX_SERVER_HOST: zabbix-proxy
      ZBX_SERVER_PORT: 10051
    volumes:
      - ./scripts:/opt/corewise/scripts:ro
    restart: always
    labels:
      - "coolify.managed=true" 